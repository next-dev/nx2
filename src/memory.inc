//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
// N E X T   M E M O R Y   S Y S T E M
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------------------------
// NEXT MEMORY SYSTEM
//----------------------------------------------------------------------------------------------------------------------
//
// Memory Map:
//
//      Real addresses      Size        8K bank     Description
//      ---------------     ----        -------     -----------------------
//      $000000-$00ffff     64K                     ZX Spectrum ROM             UNEXPANDED
//      $010000-$013fff     16K                     EsxDOS ROM
//      $014000-$017fff     16K                     MF ROM
//      $018000-$01bfff     16K                     MF EXTRA ROM
//      $01c000-$01ffff     16K                     MF RAM
//      $020000-$03ffff     128K                    DivMMC RAM
//      $040000-$05ffff     128K        0-15        Standard 128K RAM
//      $060000-$07ffff     128K        16-31       Extra RAM
//      $080000-$0fffff     512K        32-95       1st extra IC RAM
//      -------------------------------------------------------------------
//      $100000-$17ffff     512K        96-159      2nd extra IC RAM            EXPANDED
//      $180000-$1fffff     512K        160-223     3rd extra IC RAM
//
// Total memory = $200000 (2MB)
//
// Memory decode order:
//
//      $0000-$3fff     Boot ROM
//                      Machine config mapping
//                      Multiface
//                      DivMMC
//                      Layer 2 mapping
//                      MMU
//                      ROMCS expansion bus
//                      ROM
//
//      $4000-$bfff     Layer 2 mapping
//                      MMU
//
//      $c000-$ffff     MMU mapping
//      
//----------------------------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------------------------

void nxMemoryInit(MemoryPtr mem)
{
    arrayResize(mem->bytes, K_MB(2));
    memoryCopy(nextrom_data, mem->bytes + 0x000000, K_KB(64));
    memoryCopy(nextmmc_data, mem->bytes + 0x010000, K_KB(8));
}

//----------------------------------------------------------------------------------------------------------------------

void nxMemoryDone(MemoryPtr mem)
{
    arrayDone(mem->bytes);
}

//----------------------------------------------------------------------------------------------------------------------

